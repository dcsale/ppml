      !-------------------------------------------------------------------------
      !  Subroutine   :                  client_check_abort
      !-------------------------------------------------------------------------
      !
      !  Purpose      : Rank 0 checks if a particular files exists on
      !                 the local directory. If so, all processors halt.
      !
      !  Input        :
      !
      !  Input/output : 
      !
      !  Output       : lExist     (L) .TRUE. if the file exists, .FALSE.
      !                                otherwise
      !                 info       (I) return status (0 if no error)
      !
      !  Routines     :
      !
      !  Remarks      : Could check validity of file name (length etc).
      !
      !  References   :
      !
      !  Revisions    :
      !-------------------------------------------------------------------------
      !  Parallel Particle Mesh Library (PPM)
      !  ETH Zurich
      !  CH-8092 Zurich, Switzerland
      !-------------------------------------------------------------------------

      SUBROUTINE client_check_abort(lExist,info)

      !-------------------------------------------------------------------------
      !  Modules
      !-------------------------------------------------------------------------
      USE client_global
      IMPLICIT NONE
#ifdef __MPI
      !-------------------------------------------------------------------------
      !  Includes
      !-------------------------------------------------------------------------
      INCLUDE 'mpif.h'
#endif
      !-------------------------------------------------------------------------
      !  Arguments     
      !-------------------------------------------------------------------------
      LOGICAL, INTENT(  OUT)          :: lExist
      INTEGER, INTENT(  OUT)          :: info
      !-------------------------------------------------------------------------
      !  Local variables 
      !-------------------------------------------------------------------------
      INTEGER          :: ios
      !-------------------------------------------------------------------------
      !  Externals 
      !-------------------------------------------------------------------------
      
      !-------------------------------------------------------------------------
      !  Initialise 
      !-------------------------------------------------------------------------
      lExist = .FALSE.

      !-------------------------------------------------------------------------
      !  Check if file exists
      !-------------------------------------------------------------------------
      IF (rank.EQ.0) THEN
         INQUIRE(FILE=abortfile,EXIST=lExist,IOSTAT=ios)
      ENDIF

#ifdef __MPI
      !-------------------------------------------------------------------------
      !  Broad cast the result
      !-------------------------------------------------------------------------
      CALL MPI_BCast(ios   ,1,MPI_INTEGER,0,comm,info)
      CALL MPI_BCast(lExist,1,MPI_LOGICAL,0,comm,info)
#endif

      !-------------------------------------------------------------------------
      !  Check ios
      !-------------------------------------------------------------------------
      IF (ios.NE.0) THEN
         info = -1
         GOTO 9999
      ENDIF

      !-------------------------------------------------------------------------
      !  Return 
      !-------------------------------------------------------------------------
 9999 CONTINUE
      RETURN
      END SUBROUTINE client_check_abort
